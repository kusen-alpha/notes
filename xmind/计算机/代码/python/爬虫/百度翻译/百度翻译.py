import requests
import execjs

headers = {
    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.75 Safari/537.36',
    'Cookie': 'BAIDUID=60B083D14F56A95FD5D179A99E4F8708:FG=1; PSTM=1605325498; BIDUPSID=CF7791E6FFDF249B3DDD45F604CF45C6; REALTIME_TRANS_SWITCH=1; HISTORY_SWITCH=1; FANYI_WORD_SWITCH=1; SOUND_SPD_SWITCH=1; SOUND_PREFER_SWITCH=1; __yjs_duid=1_7ca36c0783b9d1ca903456ffe019a7cf1620653824691; H_WISE_SIDS=107315_110085_127969_128698_131423_131862_146870_154214_165135_165517_165935_166147_169065_170142_170816_170872_171510_172643_173016_173125_173182_173625_174180_174448_174662_174666_174683_174695_175276_175284_175360_175489_175757_175930_175974_176017_176072_176157_176258_176327_176335_176689_8000092_8000132_8000137_8000150_8000156_8000164; BDUSS=kphSmZOb2FzVnc0RU1iY0lTMTMzbk5uQWJ0eWZGUWZKSkZabTB3TWNSaXo1ZUpnRVFBQUFBJCQAAAAAAAAAAAEAAAA5LDRLucXUwtPWvPvUwsn6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALNYu2CzWLtge; BDUSS_BFESS=kphSmZOb2FzVnc0RU1iY0lTMTMzbk5uQWJ0eWZGUWZKSkZabTB3TWNSaXo1ZUpnRVFBQUFBJCQAAAAAAAAAAAEAAAA5LDRLucXUwtPWvPvUwsn6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALNYu2CzWLtge; Hm_lvt_64ecd82404c51e03dc91cb9e8c025574=1621752958; BDSFRCVID=fxCOJeC62RB-Bs7elaTzb4vOf2lm7QvTH6aoZPaDDuhQFGA9j5dnEG0P8x8g0Ku-S2-vogKK0mOTHvKF_2uxOjjg8UtVJeC6EG0Ptf8g0f5; H_BDCLCKID_SF=tJFJoC-MJDI3H48k-4QEbbQH-UnLq-JyfgOZ04n-ah05bh4x0t_MbUAt-GOqy-0HW23M_bcm3UTKsq76Wh35K5tTQP6rLfCftmj4KKJxbp52sprsBP5ZQnIihUJiB5OLBan7-lQIXKohJh7FM4tW3J0ZyxomtfQxtNRJ0DnjtpChbCKRD5-Mej5MMloLbP7taDCX_CP8Kb7VbUKR5MnkbJkXhPteLqOkaDTNhpjMKDb-_n-4yUR-DUI7Qbrr06v8bR5n_UQkLD5USR3KLPnpQT8r5bnzXxrK2-jvWbRMab3vOIJzXpO13fKzBN5thURB2DkO-4bCWJ5TMl5jDh3Mb6ksD-Ftqj-qJRKDoD-QbJT2KRTlMJrEq4tehHRMhU39WDTm_DoTWR3xVnoN2MkV0-j35G7wW4Iq5KTH-pPKKR7GfpjL5-Rm5MuHDh38y-jn3mkjbUOyfn02OPKzXqbKL44syP4j2xRnWNTlKfA-b4ncjRcTehoM3xI8LNj405OTbIFO0KJDJCFKMK_we58WDTPW5ptX2Po02TTKsJOOaCvPOtbOy4oTj6j3MR5uhTJ-aI6n5J_2bq7tJJvhKDco3MvB-fnj-xJTMGkq5Kb7fPKBqI5FQft20hKAeMtjBMoa2N542n7jWhk2Dq72ybjvQlRX5q79atTMfNTJ-qcH0KQpsIJM5-DWbT8EjHCDJ5kDtb-HVbOsa-5fKRopMtOhq4tehHRhhUJ9WDTm_Do40j6IqI3Nh-Qx24j354nhJt7LJa6q-pPKKR7AVbjeQbos0fK1LHrBt43X3mkjbInyfn02OPKz0TKV544syP4j2xRnWTciKfA-b4ncjRcTehoM3xI8LNj405OTbIFO0KJDJCcjqR8ZDjDaDTcP; BCLID_BFESS=10863577751843819868; BDSFRCVID_BFESS=fxCOJeC62RB-Bs7elaTzb4vOf2lm7QvTH6aoZPaDDuhQFGA9j5dnEG0P8x8g0Ku-S2-vogKK0mOTHvKF_2uxOjjg8UtVJeC6EG0Ptf8g0f5; H_BDCLCKID_SF_BFESS=tJFJoC-MJDI3H48k-4QEbbQH-UnLq-JyfgOZ04n-ah05bh4x0t_MbUAt-GOqy-0HW23M_bcm3UTKsq76Wh35K5tTQP6rLfCftmj4KKJxbp52sprsBP5ZQnIihUJiB5OLBan7-lQIXKohJh7FM4tW3J0ZyxomtfQxtNRJ0DnjtpChbCKRD5-Mej5MMloLbP7taDCX_CP8Kb7VbUKR5MnkbJkXhPteLqOkaDTNhpjMKDb-_n-4yUR-DUI7Qbrr06v8bR5n_UQkLD5USR3KLPnpQT8r5bnzXxrK2-jvWbRMab3vOIJzXpO13fKzBN5thURB2DkO-4bCWJ5TMl5jDh3Mb6ksD-Ftqj-qJRKDoD-QbJT2KRTlMJrEq4tehHRMhU39WDTm_DoTWR3xVnoN2MkV0-j35G7wW4Iq5KTH-pPKKR7GfpjL5-Rm5MuHDh38y-jn3mkjbUOyfn02OPKzXqbKL44syP4j2xRnWNTlKfA-b4ncjRcTehoM3xI8LNj405OTbIFO0KJDJCFKMK_we58WDTPW5ptX2Po02TTKsJOOaCvPOtbOy4oTj6j3MR5uhTJ-aI6n5J_2bq7tJJvhKDco3MvB-fnj-xJTMGkq5Kb7fPKBqI5FQft20hKAeMtjBMoa2N542n7jWhk2Dq72ybjvQlRX5q79atTMfNTJ-qcH0KQpsIJM5-DWbT8EjHCDJ5kDtb-HVbOsa-5fKRopMtOhq4tehHRhhUJ9WDTm_Do40j6IqI3Nh-Qx24j354nhJt7LJa6q-pPKKR7AVbjeQbos0fK1LHrBt43X3mkjbInyfn02OPKz0TKV544syP4j2xRnWTciKfA-b4ncjRcTehoM3xI8LNj405OTbIFO0KJDJCcjqR8ZDjDaDTcP; H_PS_PSSID=34099_33966_31253_34004_33607_34078; BDORZ=B490B5EBF6F3CD402E515D22BCDA1598; BAIDUID_BFESS=E20B3683B6612D892914EE7BBED07B87:FG=1; delPer=0; PSINO=7; BA_HECTOR=8g25010k2h21240laj1gc49ge0r; Hm_lpvt_64ecd82404c51e03dc91cb9e8c025574=1623337148; ab_sr=1.0.1_Y2RhMTVmYzljZWYxNDEzNzY0MzU0ZThmOWM5OTI3ZTAzMzk1NTc1NWI5NjVjYzE4N2I5MjI0NDhiNTZhMDMzMzRkNGU2MDdlNDYyMTgwMjc0NGQ5NzZmYWUyZjI2YTFkMmFiYjJmMTRmNGQ1Y2VjMWZlNzBjNTFkYzU4ZmM3OGZkZTRmOTBiMTg2MTIxOGYwNzBjOGFhNDAyODUwZGRhOGQxYjQ3ZmM3YTk4OWQ1ZDlhYjViYTJjOTE3NjZjYzIx; __yjs_st=2_NjA3YTFmZTE4MDcyMjAxYTkxNGRkMGMyN2Q4YjZkNmExNTU0OGU3MDhiM2FiOTQzMjY2NzBjMDQwZGY3N2EzMjQ2NmE5ZWJlYmExNTNjYjg0MTJjZmU0MzJhMGIzYmEyMGQwMWIyNzZiMGFjMWEzMTI4ZmFkMDA2MDg5NmNhZWU0YzBjNmUyZGIwODRjZTJkMzgzNWQ5YmExODVmOGVkZDhjZmYxNTlmZTA3MDEzYmQ5NTBhOTVkOWQ3OWU2ZGU5ZmViZDk3MjhkZDEyOTUwMWQ4ZTUxNzZmOTJhZjMwMWYzYTg5N2NjNWI2ODM4N2E1MmNiYTFjNGM3MWM3OTMyOF83X2VjN2U0ZWE0'
}


def get_sign(query):
    with open('test.js', encoding='utf-8') as f:
        sign_js = f.read()
    return execjs.compile(sign_js).call('e', query)


query = '你是谁'
data = {
    'from': 'zh',
    'to': 'en',
    'query': query,
    'transtype': 'realtime',
    'simple_means_flag': '3',
    'sign': get_sign(query),
    'token': '6b4baa882020bfb4a7a02b15f130db27',  # 有一定的时效性，待研究
    'domain': 'common'
}

url = 'https://fanyi.baidu.com/v2transapi?from=zh&to=en'
response = requests.post(url=url, headers=headers, data=data)
print(response.json())
